{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% block title %} Sushi by RC | My Account {% endblock %}
{% block icons %}
    <li class="nav-item ms-auto" >
        <a class="navbar-brand" style="" href="{% url 'cart' %}">
            <i class="fa-solid fa-cart-shopping"></i>
        </a>
    </li>
    <li class="nav-item ms-auto" >
        <a class="navbar-brand" style="" href="{% url 'about' %}">
            <i class="fa-solid fa-circle-info"></i>
        </a>
    </li>
{% endblock %}

{% block body %}

<!-- PRESENTATION -->
<div class="main-container">
    <div class="register-presentation-img-container">
        <img class="register-img" src="{% static 'images/cover.jpeg' %}">
        <div class="presentation-text">
            <h1 class="display-fonts">
                Hello, {{user.first_name}}!
            </h1>
             {% if messages %}
                    {% for message in messages %}
                    <h4 class="{{message.tags}}">{{ message }}</h4>
                    {% endfor %}
            {% else %}
            <h4>
                Welcome back.
            </h4>
            {% endif %}
            <div class="log-out-button-container" >
                    <a href="{% url 'logout' %}" >
                        <button type="button" class="logout-button" >Log out</button>
                    </a>
            </div>
        </div>
    </div>

</div>

<!-- BILLING DETAILS FORM -->
<div class="main-container">
    <form id="form">
    </form>

    <div class="register-form-container">

        {% if single_address %}
            <div class="register-form-pt1">
                <h4>
                    Shipping Address
                </h4>
                <p style="color: grey;">
                You can update your billing details right here if you need to.
                <br>
                Otherwise, just ignore this form.
                </p>
                <form method="post" action="{% url 'dashboard' %}">
                    {% csrf_token %}
                    {{ shipping_form|crispy }}
                    <button type="submit" class="add-button"> Update Info </button>
                </form>
                <div class="update-info-button-container">
                </div>
            </div>
        {% endif %}

        {% if not single_address %}
            {% if no_address %}
                <h4 class="buckaroo">
                    Wait a second there, buckaroo.
                    <br>
                    You don't have any address registered yet!
                </h4>
            {% else %}

                <div class="register-form-pt1">
                    <h4>
                        All Your addresses
                    </h4>
                    <p style="color: grey;">
                    Choose what to do with them if needed
                    </p>
                    {% for i in address %}
                       <ul>
                           <li>
                               <h4>{{i.street_1}} - {{i.street_2}} - {{i.zip}}</h4>
                               <button class="danger"> Delete </button>
                               <button class="danger"> Edit </button>
                           </li>
                       </ul>
                    {% endfor %}
                </div>

            {% endif %}
        {% endif %}

        {% if not no_address%}
        <div class="register-form-pt2">
            <h4>
                Orders
            </h4>
            <p style="color: grey;">
                Check on your order history here.
            </p>
            <div class="update-info-button-container">
                <button class="add-button"> Go </button>
            </div>
        </div>
        {% endif %}

    </div>

</div>
{% endblock %}